# kintone Authenticatorの設定方法

## アプリを作る

### アプリテンプレートを使う方法 （推奨）

1. [リリースページ](https://github.com/shidax-corp/kintone-authenticator/releases)から、最新版の「kintone-authenticator-app.zip」をダウンロードします。
2. kintoneのアプリ一覧画面でプラスアイコンを押してアプリ作成画面を開きます。
3. 「テンプレートファイルを読み込んで作成」をクリックします。
4. ダウンロードした「kintone-authenticator-app.zip」を選択して「アプリを作成」ボタンを押します。

### 手動でアプリを作る方法

1. kintoneのアプリ一覧画面でプラスアイコンを押してアプリ作成画面を開きます。

2. 「空のアプリ」をクリックします。

3. 以下のフィールドを追加します。

| フィールド名 | フィールドコード | フィールドタイプ | 用途                                                                   |
| ------------ | ---------------- | ---------------- | ---------------------------------------------------------------------- |
| 名前         | name             | 文字列（1行）    | レコードの名前を入力します。                                           |
| URL          | url              | 文字列（1行）    | 認証先のURLを入力します。ワイルドカードとして`*`を使うこともできます。 |
| ユーザー名   | username         | 文字列（1行）    | 認証に使うユーザー名を入力します。                                     |
| パスワード   | password         | 文字列（1行）    | 認証に使うパスワードを入力します。                                     |
| OTPAuth URI  | otpuri           | 文字列（1行）    | ワンタイムパスワードの生成に必要な情報を格納します。                   |
|              | space            | スペース         | カスタマイズした要素を表示するために使用します。                       |

4. 必要に応じて、追加のフィールドを作成します。スペースフィールドよりも下に配置することをお勧めします。

5. 「一覧」タブに移動し、プラスアイコンを押して新しい一覧を追加します。

6. 表示された一覧の設定画面で以下のように設定します。
   - **一覧名**: 好きな名前をつけてください
   - **レコード一覧の表示形式**: 「カスタマイズ」
   - **一覧を表示する範囲**: 「PC版とモバイル版で表示する」
   - **HTML**: 「`<div id="kintone-authenticator-list-view"></div>`」
   - **ページネーションを表示する**: チェックを入れる
   - **絞り込み**: 必要に応じて設定してください

7. 「保存」ボタンを押して設定を保存します。

8. 「設定」タブに移動し、「JavaScript / CSSでカスタマイズ」を開きます。

9. [リリースページ](https://github.com/shidax-corp/kintone-authenticator/releases)からダウンロードしたファイルを以下のようにアップロードします。
   - PC用のJavaScrpit: `kintone-authenticator-desktop.js`
   - モバイル用のJavaScript: `kintone-authenticator-mobile.js`

10. 「保存」ボタンを押して設定を保存します。

11. 「アプリを更新」ボタンを押してアプリを公開します。

## アプリを更新する

最新版は[リリースページ](https://github.com/shidax-corp/kintone-authenticator/releases)で公開されています。
添付されている「kintone-authenticator-desktop.js」と「kintone-authenticator-mobile.js」をダウンロードし、アプリの設定画面で差し替えてください。

kintoneアプリに変更が必要な場合はリリースノートに記載してありますので、jsファイルを適用する前に必ず確認してください。

なお、バージョン番号は以下のような形式になっています。

```
{メジャーバージョン}.{マイナーバージョン}.{パッチバージョン}
```

- メジャーバージョン: kintoneアプリのフィールド構成に変更があった場合や、過去のレコードが動作しなくなるような大幅な変更があった場合に更新されます。
- マイナーバージョン: 新機能の追加や、UIの変更があった場合に更新されます。
- パッチバージョン: バグ修正などの使い勝手に影響しない変更があった場合に更新されます。
